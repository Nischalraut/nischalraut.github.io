<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nischal Raut | Aerospace Engineer | SYSTEM: ONLINE</title>
    
    <!-- Dynamic Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='8' fill='%23FC3D21'/%3E%3Cpath d='M32 8 L54 56 L32 46 L10 56 Z' fill='white'/%3E%3C/svg%3E">

    <!-- Fonts: Sci-Fi & Clean -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;500;800&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">

    <!-- Styles -->
    <style>
        :root {
            --c-accent: #FC3D21;
            --c-accent-glow: rgba(252, 61, 33, 0.6);
            --c-dark: #050508;
            --c-panel: rgba(10, 15, 25, 0.75);
            --c-text: #E0E6ED;
            --c-muted: #8492A6;
            --c-grid: rgba(255, 255, 255, 0.05);
            
            --f-head: 'Orbitron', sans-serif;
            --f-body: 'Rajdhani', sans-serif;
            --f-code: 'JetBrains Mono', monospace;

            --ease-out: cubic-bezier(0.23, 1, 0.32, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; /* Custom Cursor */ }

        body {
            background: var(--c-dark);
            color: var(--c-text);
            font-family: var(--f-body);
            overflow: hidden; /* 3D Scene handles scrolling */
            height: 100vh;
            width: 100vw;
        }

        /* --- 1. CANVAS & VIGNETTE --- */
        #webgl {
            position: fixed; top: 0; left: 0; outline: none; z-index: 1;
        }
        .vignette {
            position: fixed; inset: 0; z-index: 2; pointer-events: none;
            background: radial-gradient(circle, transparent 50%, black 140%);
        }
        .scanline {
            position: fixed; inset: 0; z-index: 2; pointer-events: none;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1));
            background-size: 100% 4px;
            opacity: 0.3;
        }

        /* --- 2. CUSTOM CURSOR (AERODYNAMIC TRAIL) --- */
        #cursor {
            position: fixed; top: 0; left: 0; width: 20px; height: 20px;
            border: 2px solid var(--c-accent); border-radius: 50%;
            transform: translate(-50%, -50%); z-index: 9999; pointer-events: none;
            mix-blend-mode: difference; transition: width 0.3s, height 0.3s;
        }
        #cursor-dot {
            position: fixed; top: 0; left: 0; width: 4px; height: 4px;
            background: white; border-radius: 50%;
            transform: translate(-50%, -50%); z-index: 9999; pointer-events: none;
        }
        body:hover #cursor { width: 40px; height: 40px; border-color: white; opacity: 0.5; }

        /* --- 3. LOADING SCREEN (BIOS BOOT) --- */
        #loader {
            position: fixed; inset: 0; background: #000; z-index: 5000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            font-family: var(--f-code); color: var(--c-accent);
        }
        .loader-text { font-size: 14px; margin-bottom: 10px; text-shadow: 0 0 10px var(--c-accent); }
        .progress-bar { width: 300px; height: 4px; background: #333; position: relative; }
        .progress-fill { position: absolute; left: 0; top: 0; height: 100%; width: 0%; background: var(--c-accent); transition: width 0.2s; }

        /* --- 4. HUD UI OVERLAY --- */
        #ui-layer {
            position: fixed; inset: 0; z-index: 10; pointer-events: none;
            display: grid; grid-template-rows: 80px 1fr 60px;
            padding: 2rem;
        }
        
        /* Nav */
        nav {
            pointer-events: auto; display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid var(--c-grid); padding-bottom: 1rem;
        }
        .brand {
            font-family: var(--f-head); font-weight: 900; font-size: 24px; letter-spacing: 2px;
            color: white; text-transform: uppercase;
        }
        .brand span { color: var(--c-accent); }
        .nav-links { display: flex; gap: 2rem; list-style: none; }
        .nav-item {
            font-family: var(--f-code); font-size: 12px; cursor: pointer; position: relative;
            color: var(--c-muted); transition: 0.3s; text-transform: uppercase;
        }
        .nav-item:hover, .nav-item.active { color: var(--c-accent); text-shadow: 0 0 8px var(--c-accent-glow); }
        .nav-item::before {
            content: '['; margin-right: 5px; opacity: 0; transition: 0.3s;
        }
        .nav-item::after {
            content: ']'; margin-left: 5px; opacity: 0; transition: 0.3s;
        }
        .nav-item:hover::before, .nav-item:hover::after { opacity: 1; }

        /* --- 5. CONTENT SECTIONS (DOM Overlays) --- */
        .page-section {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 80%; max-width: 1200px; height: 80%;
            display: none; pointer-events: none; opacity: 0;
            transition: opacity 0.5s var(--ease-out), transform 0.5s var(--ease-out);
        }
        .page-section.active {
            display: flex; pointer-events: auto; opacity: 1;
        }

        /* HERO CONTENT */
        #hero-section { align-items: center; justify-content: flex-start; }
        .hero-content {
            max-width: 600px;
            background: linear-gradient(90deg, var(--c-panel) 0%, rgba(0,0,0,0) 100%);
            padding: 3rem; border-left: 4px solid var(--c-accent);
            backdrop-filter: blur(10px);
        }
        h1 {
            font-family: var(--f-head); font-size: 4rem; line-height: 0.9; margin-bottom: 1rem;
            text-transform: uppercase; background: linear-gradient(to right, #fff, #888);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .roles { font-family: var(--f-code); color: var(--c-accent); font-size: 1.2rem; margin-bottom: 2rem; }
        .bio { line-height: 1.6; font-size: 1.1rem; color: var(--c-muted); margin-bottom: 2rem; }
        
        /* Buttons */
        .btn {
            display: inline-flex; align-items: center; padding: 12px 30px;
            background: rgba(252, 61, 33, 0.1); border: 1px solid var(--c-accent);
            color: var(--c-accent); font-family: var(--f-head); font-weight: 700;
            text-transform: uppercase; letter-spacing: 2px;
            transition: 0.4s; clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
        }
        .btn:hover { background: var(--c-accent); color: #000; box-shadow: 0 0 20px var(--c-accent-glow); }

        /* PANEL STYLES (Glassmorphism) */
        .panel {
            background: var(--c-panel); border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(20px); border-radius: 4px; padding: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            overflow-y: auto; max-height: 100%;
            scrollbar-width: thin; scrollbar-color: var(--c-accent) #111;
        }
        
        /* GRID LAYOUTS */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; height: 100%; }
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }

        /* SKILLS STYLING */
        .skill-bar-container { margin-bottom: 1.5rem; }
        .skill-meta { display: flex; justify-content: space-between; margin-bottom: 5px; font-family: var(--f-code); font-size: 12px; }
        .skill-track { width: 100%; height: 6px; background: rgba(255,255,255,0.1); }
        .skill-fill { height: 100%; background: var(--c-accent); width: 0%; transition: width 1s ease 0.5s; box-shadow: 0 0 10px var(--c-accent); }
        
        /* PROJECT CARDS (Holographic) */
        .proj-card {
            border: 1px solid rgba(255,255,255,0.1); padding: 1.5rem; transition: 0.3s;
            background: linear-gradient(180deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0) 100%);
            position: relative; overflow: hidden;
        }
        .proj-card::before {
            content:''; position: absolute; top:0; left:0; width: 2px; height: 0%; background: var(--c-accent); transition: 0.3s;
        }
        .proj-card:hover { transform: translateY(-5px); border-color: rgba(255,255,255,0.3); }
        .proj-card:hover::before { height: 100%; }
        .proj-tag { font-family: var(--f-code); color: var(--c-accent); font-size: 10px; margin-bottom: 10px; display: block; }
        .proj-title { font-family: var(--f-head); font-size: 1.2rem; margin-bottom: 0.5rem; }
        .proj-desc { font-size: 0.9rem; color: var(--c-muted); line-height: 1.5; }

        /* TIMELINE */
        .timeline-item { border-left: 2px solid var(--c-accent); padding-left: 1.5rem; margin-bottom: 2rem; position: relative; }
        .timeline-item::after {
            content:''; position: absolute; left: -6px; top: 0; width: 10px; height: 10px; background: #000; border: 2px solid var(--c-accent);
        }
        
        /* ACADEMIC VAULT */
        .lock-overlay {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 300px; border: 1px dashed var(--c-accent); color: var(--c-accent);
            font-family: var(--f-code); text-align: center;
        }
        .graph-bars { display: flex; align-items: flex-end; gap: 10px; height: 300px; display: none; }
        .graph-col { flex: 1; background: rgba(252, 61, 33, 0.2); transition: height 1s; position: relative; }
        .graph-col:hover { background: var(--c-accent); }
        .graph-tooltip { 
            position: absolute; top: -25px; left: 50%; transform: translateX(-50%);
            font-family: var(--f-code); font-size: 10px; color: white; opacity: 0; transition: 0.2s;
        }
        .graph-col:hover .graph-tooltip { opacity: 1; }

        /* --- 6. FOOTER HUD --- */
        .hud-footer {
            display: flex; justify-content: space-between; align-items: flex-end;
            font-family: var(--f-code); font-size: 10px; color: var(--c-muted);
            border-top: 1px solid var(--c-grid); padding-top: 1rem; pointer-events: auto;
        }
        .socials a { color: var(--c-text); margin-right: 15px; text-decoration: none; transition: 0.3s; }
        .socials a:hover { color: var(--c-accent); }
        .status { display: flex; gap: 10px; align-items: center; }
        .status-dot { width: 8px; height: 8px; background: #0f0; border-radius: 50%; box-shadow: 0 0 5px #0f0; animation: blink 2s infinite; }
        
        @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }

        /* --- 7. MODAL (Detail View) --- */
        #detail-modal {
            position: fixed; inset: 0; z-index: 200; background: rgba(0,0,0,0.8);
            display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: 0.3s; backdrop-filter: blur(5px);
        }
        #detail-modal.open { opacity: 1; pointer-events: auto; }
        .modal-content {
            width: 600px; background: #111; border: 1px solid var(--c-accent); padding: 2rem;
            position: relative; box-shadow: 0 0 50px rgba(252,61,33,0.2);
        }
        .close-modal { position: absolute; top: 10px; right: 15px; cursor: pointer; font-size: 24px; color: var(--c-accent); }

        /* Media Queries */
        @media (max-width: 900px) {
            .grid-2 { grid-template-columns: 1fr; }
            h1 { font-size: 2.5rem; }
            .nav-links { display: none; } /* Simplified for mobile */
        }
    </style>
</head>
<body>

    <!-- VISUAL LAYERS -->
    <div class="vignette"></div>
    <div class="scanline"></div>
    <canvas id="webgl"></canvas>
    
    <!-- CURSOR -->
    <div id="cursor"></div>
    <div id="cursor-dot"></div>

    <!-- LOADING SCREEN -->
    <div id="loader">
        <div class="loader-text">INITIALIZING SYSTEMS...</div>
        <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
        <div class="loader-text" style="margin-top: 10px; font-size: 10px;">LOADING CFD SHADERS // GENERATING GEOMETRY</div>
    </div>

    <!-- UI LAYER -->
    <div id="ui-layer">
        
        <!-- NAVIGATION -->
        <nav>
            <div class="brand">NISCHAL<span>.RAUT</span></div>
            <ul class="nav-links">
                <li class="nav-item active" data-target="hero">Command</li>
                <li class="nav-item" data-target="about">Telemetry</li>
                <li class="nav-item" data-target="projects">Missions</li>
                <li class="nav-item" data-target="experience">Flight Log</li>
                <li class="nav-item" data-target="contact">Comms</li>
            </ul>
            <div style="font-family:var(--f-code); font-size:10px; color:var(--c-accent);">SYS: NOMINAL</div>
        </nav>

        <!-- SECTIONS CONTAINER -->
        <div id="main-interface" style="position: relative; width: 100%; height: 100%;">
            
            <!-- 1. HERO SECTION -->
            <section id="hero" class="page-section active">
                <div class="hero-content">
                    <div style="font-family:var(--f-code); color:var(--c-accent); margin-bottom:10px;">// PILOT PROFILE</div>
                    <h1>Nischal Raut</h1>
                    <div class="roles" id="typewriter">Aerospace Engineer</div>
                    <p class="bio">
                        Merging Computational Fluid Dynamics with Experimental Aerodynamics. 
                        Specializing in Wind Tunnel testing, UAV systems, and Avionics integration.
                    </p>
                    <div style="display:flex; gap: 1rem;">
                        <button class="btn" onclick="navTo('projects')">Initialize Portfolio</button>
                        <button class="btn" style="filter: grayscale(1); opacity:0.7;" onclick="navTo('contact')">Establish Link</button>
                    </div>
                </div>
            </section>

            <!-- 2. ABOUT & SKILLS -->
            <section id="about" class="page-section">
                <div class="grid-2">
                    <div class="panel">
                        <h2 style="font-family:var(--f-head); margin-bottom:1rem;">Philosophy</h2>
                        <p style="margin-bottom:1rem; color:var(--c-muted); line-height:1.6;">
                            Engineering is the art of negotiating with physics. My methodology bridges the gap between digital simulation (ANSYS/MATLAB) and physical validation (Wind Tunnel/Flight Test).
                        </p>
                        <h3 style="font-family:var(--f-head); color:var(--c-accent); margin-top:2rem;">Interests</h3>
                        <ul style="list-style:none; margin-top:10px; display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                            <li style="background:rgba(255,255,255,0.05); padding:10px;">RC Aviation (Scratch Build)</li>
                            <li style="background:rgba(255,255,255,0.05); padding:10px;">Sci-Fi Literature</li>
                            <li style="background:rgba(255,255,255,0.05); padding:10px;">Drone Photography</li>
                            <li style="background:rgba(255,255,255,0.05); padding:10px;">Space Tech Analysis</li>
                        </ul>
                    </div>
                    <div class="panel">
                        <h2 style="font-family:var(--f-head); margin-bottom:1.5rem;">System Capacities</h2>
                        
                        <!-- Skill Bars -->
                        <div class="skill-bar-container">
                            <div class="skill-meta"><span>CFD & Analysis (ANSYS, Math)</span><span>70%</span></div>
                            <div class="skill-track"><div class="skill-fill" style="width:70%"></div></div>
                        </div>
                        <div class="skill-bar-container">
                            <div class="skill-meta"><span>CAD & Design (CATIA, SolidWorks)</span><span>80%</span></div>
                            <div class="skill-track"><div class="skill-fill" style="width:80%"></div></div>
                        </div>
                        <div class="skill-bar-container">
                            <div class="skill-meta"><span>Programming (Python, C, MATLAB)</span><span>60%</span></div>
                            <div class="skill-track"><div class="skill-fill" style="width:60%"></div></div>
                        </div>
                        <div class="skill-bar-container">
                            <div class="skill-meta"><span>Experimental (Wind Tunnel, Fab)</span><span>80%</span></div>
                            <div class="skill-track"><div class="skill-fill" style="width:80%"></div></div>
                        </div>

                        <div style="margin-top:2rem; padding:1rem; border:1px dashed var(--c-accent); font-family:var(--f-code); font-size:12px; color:var(--c-accent);">
                            ACADEMIC VAULT: IOE PULCHOWK
                            <div id="academic-lock" class="lock-overlay" style="height:100px; margin-top:10px; cursor:pointer;" onclick="unlockAcademic()">
                                [ CLICK TO DECRYPT GRADES ]
                            </div>
                            <div id="academic-graph" class="graph-bars" style="height:100px; margin-top:10px;">
                                <!-- Injected via JS -->
                            </div>
                            <div id="agg-score" style="display:none; text-align:center; margin-top:5px;">AGGREGATE: 76.71%</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 3. PROJECTS -->
            <section id="projects" class="page-section">
                <div class="panel" style="height:100%;">
                    <h2 style="font-family:var(--f-head); margin-bottom:2rem;">Mission Log</h2>
                    <div class="grid-3">
                        
                        <div class="proj-card" onclick="openModal('tunnel')">
                            <span class="proj-tag">RESEARCH // EXPERIMENTAL</span>
                            <div class="proj-title">Subsonic Wind Tunnel</div>
                            <div class="proj-desc">Design and fabrication of open-jet tunnel with gust generator. Validated 0.88% Turbulent Intensity.</div>
                        </div>

                        <div class="proj-card" onclick="openModal('b52')">
                            <span class="proj-tag">DESIGN // CONCEPTUAL</span>
                            <div class="proj-title">B-52 Air Launch</div>
                            <div class="proj-desc">Study of using B-52 as carrier for satellite launch vehicles to optimize LEO insertion.</div>
                        </div>

                        <div class="proj-card" onclick="openModal('glider')">
                            <span class="proj-tag">FABRICATION // UAV</span>
                            <div class="proj-title">Styrofoam Glider</div>
                            <div class="proj-desc">Scratch-built RC aircraft using hot-wire foam cutting. Flight tested with Al spars.</div>
                        </div>

                        <div class="proj-card" onclick="openModal('f15')">
                            <span class="proj-tag">SIMULATION // CFD</span>
                            <div class="proj-title">F-15 Flow Analysis</div>
                            <div class="proj-desc">Supersonic flow simulation (Mach 2.5) analyzing shock diamonds and drag coefficients.</div>
                        </div>

                    </div>
                </div>
            </section>

            <!-- 4. EXPERIENCE -->
            <section id="experience" class="page-section">
                <div class="panel" style="max-width:800px; margin:0 auto;">
                    <h2 style="font-family:var(--f-head); margin-bottom:2rem;">Flight History</h2>
                    
                    <div class="timeline-item">
                        <div style="font-family:var(--f-head); font-size:1.2rem; color:var(--c-accent);">AIRBUS INDIA</div>
                        <div style="font-family:var(--f-code); font-size:0.9rem; margin-bottom:0.5rem;">Associate Engineer - Integration Test | Dec 2024 - Present</div>
                        <p style="color:var(--c-muted);">Integration testing of avionics subsystems. Leveraging data analytics for flight test campaigns and test automation.</p>
                    </div>

                    <div class="timeline-item">
                        <div style="font-family:var(--f-head); font-size:1.2rem; color:white;">AIRBUS INDIA</div>
                        <div style="font-family:var(--f-code); font-size:0.9rem; margin-bottom:0.5rem;">Intern - System Testing | July 2024 - Nov 2024</div>
                        <p style="color:var(--c-muted);">Supported System V&V. Performed functional testing on simulation benches and defect tracking.</p>
                    </div>

                    <div class="timeline-item">
                        <div style="font-family:var(--f-head); font-size:1.2rem; color:white;">AIRLIFT TECHNOLOGY</div>
                        <div style="font-family:var(--f-code); font-size:0.9rem; margin-bottom:0.5rem;">Engineering Intern | 2024</div>
                        <p style="color:var(--c-muted);">Led drone mapping for Kathmandu Metro. 3D Terrain modeling via photogrammetry.</p>
                    </div>
                </div>
            </section>

            <!-- 5. CONTACT -->
            <section id="contact" class="page-section">
                <div class="panel" style="max-width:600px; margin: 0 auto; text-align: center;">
                    <h2 style="font-family:var(--f-head);">Establish Link</h2>
                    <p style="margin-bottom:2rem; color:var(--c-muted);">nischalraut6@gmail.com</p>
                    
                    <div style="display:flex; justify-content:center; gap:1rem; margin-bottom:2rem;">
                         <a href="https://www.linkedin.com/in/nischal-raut-1b2227314/" target="_blank" class="btn">LINKEDIN</a>
                         <a href="https://github.com/Nischalraut" target="_blank" class="btn">GITHUB</a>
                    </div>

                    <form onsubmit="event.preventDefault(); alert('Transmission Sent');" style="text-align:left;">
                        <input type="text" placeholder="CALLSIGN (NAME)" style="width:100%; padding:15px; background:rgba(0,0,0,0.3); border:1px solid var(--c-grid); color:white; margin-bottom:10px; font-family:var(--f-code);">
                        <input type="email" placeholder="FREQUENCY (EMAIL)" style="width:100%; padding:15px; background:rgba(0,0,0,0.3); border:1px solid var(--c-grid); color:white; margin-bottom:10px; font-family:var(--f-code);">
                        <textarea rows="5" placeholder="MESSAGE DATA..." style="width:100%; padding:15px; background:rgba(0,0,0,0.3); border:1px solid var(--c-grid); color:white; margin-bottom:10px; font-family:var(--f-code);"></textarea>
                        <button class="btn" style="width:100%;">TRANSMIT</button>
                    </form>
                </div>
            </section>

        </div>

        <!-- FOOTER HUD -->
        <div class="hud-footer">
            <div class="socials">
                <span>LOCATION: BANGALORE, IN</span>
            </div>
            <div class="status">
                <span>SERVER: ONLINE</span>
                <div class="status-dot"></div>
            </div>
        </div>
    </div>

    <!-- MODAL POPUP -->
    <div id="detail-modal">
        <div class="modal-content">
            <div class="close-modal" onclick="closeModal()">Ã—</div>
            <h2 id="m-title" style="font-family:var(--f-head); color:var(--c-accent);">TITLE</h2>
            <div id="m-specs" style="display:grid; grid-template-columns:1fr 1fr; gap:1rem; margin:1rem 0; font-family:var(--f-code); font-size:12px;"></div>
            <p id="m-desc" style="line-height:1.6; color:var(--c-muted);"></p>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <script>
        /* 
        -----------------------------------------------------------------
        1. SYSTEM INITIALIZATION & TYPEWRITER
        -----------------------------------------------------------------
        */
        const loader = document.getElementById('loader');
        const progress = document.getElementById('progress');
        
        // Simulating heavy asset loading
        let loadVal = 0;
        const loadInt = setInterval(() => {
            loadVal += Math.random() * 10;
            if(loadVal >= 100) {
                loadVal = 100;
                clearInterval(loadInt);
                gsap.to(loader, { opacity: 0, duration: 1, delay: 0.5, onComplete: () => loader.style.display = 'none' });
                initThreeJS(); // Start 3D engine
            }
            progress.style.width = loadVal + '%';
        }, 100);

        // Typewriter Effect
        const roles = ["AEROSPACE ENGINEER", "UAV SPECIALIST", "CFD ANALYST", "AVIONICS INTEGRATOR"];
        let rIdx = 0, cIdx = 0, isDel = false;
        function type() {
            const el = document.getElementById('typewriter');
            const txt = roles[rIdx];
            el.innerHTML = txt.substring(0, cIdx) + "<span class='blink'>_</span>";
            
            if(!isDel) {
                if(cIdx < txt.length) { cIdx++; setTimeout(type, 100); }
                else { isDel = true; setTimeout(type, 2000); }
            } else {
                if(cIdx > 0) { cIdx--; setTimeout(type, 50); }
                else { isDel = false; rIdx = (rIdx+1)%roles.length; setTimeout(type, 500); }
            }
        }
        setTimeout(type, 3000);

        /* 
        -----------------------------------------------------------------
        2. THREE.JS ENGINE (Background Particles & Flow Field)
        -----------------------------------------------------------------
        */
        function initThreeJS() {
            const canvas = document.querySelector('#webgl');
            const scene = new THREE.Scene();
            // Fog for depth
            scene.fog = new THREE.FogExp2(0x050508, 0.002);

            const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            camera.position.z = 30;

            const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

            // --- PARTICLE SYSTEM (CFD Simulation Look) ---
            const particlesCnt = 3000;
            const posArray = new Float32Array(particlesCnt * 3);
            
            for(let i=0; i < particlesCnt * 3; i++) {
                posArray[i] = (Math.random() - 0.5) * 100; // Spread wide
            }

            const material = new THREE.PointsMaterial({
                size: 0.15,
                color: 0xFC3D21, // Accent color
                transparent: true,
                opacity: 0.8,
                blending: THREE.AdditiveBlending
            });

            const geometry = new THREE.BufferGeometry();
            geometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            
            const particlesMesh = new THREE.Points(geometry, material);
            scene.add(particlesMesh);

            // --- WIREFRAME GEOMETRY (Abstract Aero Shapes) ---
            const geoRing = new THREE.TorusGeometry(15, 0.1, 16, 100);
            const matRing = new THREE.MeshBasicMaterial({ color: 0x444444, wireframe: true, transparent: true, opacity: 0.3 });
            const ring1 = new THREE.Mesh(geoRing, matRing);
            const ring2 = new THREE.Mesh(geoRing, matRing);
            ring2.rotation.x = Math.PI / 2;
            scene.add(ring1);
            scene.add(ring2);

            // --- INTERACTIVITY ---
            let mouseX = 0;
            let mouseY = 0;
            
            window.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
                
                // Custom Cursor movement
                const cursor = document.getElementById('cursor');
                const cursorDot = document.getElementById('cursor-dot');
                cursor.style.left = mouseX + 'px';
                cursor.style.top = mouseY + 'px';
                cursorDot.style.left = mouseX + 'px';
                cursorDot.style.top = mouseY + 'px';

                // 3D Parallax
                const xRatio = (e.clientX / window.innerWidth - 0.5) * 2;
                const yRatio = (e.clientY / window.innerHeight - 0.5) * 2;
                
                gsap.to(particlesMesh.rotation, {
                    y: xRatio * 0.5,
                    x: -yRatio * 0.5,
                    duration: 2
                });
                
                gsap.to(ring1.rotation, { x: yRatio, y: xRatio, duration: 3 });
            });

            // --- ANIMATION LOOP ---
            const clock = new THREE.Clock();

            function tick() {
                const elapsedTime = clock.getElapsedTime();

                // Rotate abstract shapes
                ring1.rotation.z = elapsedTime * 0.1;
                ring2.rotation.z = elapsedTime * -0.1;

                // Animate Particles (Flow)
                particlesMesh.rotation.y = elapsedTime * 0.05;
                
                // Wave effect on particles
                const positions = particlesMesh.geometry.attributes.position.array;
                for(let i=0; i<particlesCnt; i++) {
                    const i3 = i*3;
                    const x = geometry.attributes.position.array[i3];
                    // Simple sine wave simulation
                    geometry.attributes.position.array[i3 + 1] += Math.sin(elapsedTime + x) * 0.01; 
                }
                particlesMesh.geometry.attributes.position.needsUpdate = true;

                renderer.render(scene, camera);
                window.requestAnimationFrame(tick);
            }
            tick();

            // Resize handling
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        /* 
        -----------------------------------------------------------------
        3. NAVIGATION LOGIC (SPA)
        -----------------------------------------------------------------
        */
        const navItems = document.querySelectorAll('.nav-item');
        const sections = document.querySelectorAll('.page-section');

        // Function to navigate
        window.navTo = (targetId) => {
            // Update Nav UI
            navItems.forEach(item => {
                item.classList.remove('active');
                if(item.dataset.target === targetId) item.classList.add('active');
            });

            // Transition Sections
            const current = document.querySelector('.page-section.active');
            const target = document.getElementById(targetId);

            if(current && current !== target) {
                gsap.to(current, { opacity: 0, scale: 0.95, duration: 0.5, onComplete: () => {
                    current.classList.remove('active');
                    target.classList.add('active');
                    gsap.fromTo(target, { opacity: 0, scale: 1.05 }, { opacity: 1, scale: 1, duration: 0.5 });
                }});
            }
        }

        // Click listeners for nav
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                navTo(item.dataset.target);
            });
        });

        /* 
        -----------------------------------------------------------------
        4. ACADEMIC UNLOCK SYSTEM
        -----------------------------------------------------------------
        */
        const marks = [
            {s:'1st', v:59.68}, {s:'2nd', v:67.43}, {s:'3rd', v:65.29}, {s:'4th', v:69.14},
            {s:'5th', v:78.4}, {s:'6th', v:83.75}, {s:'7th', v:86.15}, {s:'8th', v:89.2}
        ];

        window.unlockAcademic = () => {
            const lock = document.getElementById('academic-lock');
            const graph = document.getElementById('academic-graph');
            const agg = document.getElementById('agg-score');
            
            // Glitch effect unlock
            lock.innerText = "DECRYPTING...";
            setTimeout(() => {
                lock.style.display = 'none';
                graph.style.display = 'flex';
                agg.style.display = 'block';

                graph.innerHTML = marks.map(m => `
                    <div class="graph-col" style="height:0%" data-h="${m.v}%">
                        <div class="graph-tooltip">${m.s}: ${m.v}%</div>
                    </div>
                `).join('');

                // Animate bars
                setTimeout(() => {
                    document.querySelectorAll('.graph-col').forEach(bar => {
                        bar.style.height = bar.getAttribute('data-h');
                    });
                }, 100);
            }, 800);
        }

        /* 
        -----------------------------------------------------------------
        5. PROJECT MODAL SYSTEM
        -----------------------------------------------------------------
        */
        const projectData = {
            tunnel: {
                title: "Subsonic Wind Tunnel",
                specs: "<span>Section: 1.2m x 0.52m</span><span>Max V: 10 m/s</span><span>Sensor: Hot-wire</span><span>Status: COMPLETE</span>",
                desc: "Designed and fabricated an open-jet wind tunnel featuring a custom gust generator with oscillating vanes. The system was validated experimentally to achieve a turbulence intensity of 0.88%, providing a controlled environment for unsteady aerodynamic analysis."
            },
            b52: {
                title: "B-52 Air Launch Study",
                specs: "<span>Alt: 60,000 ft</span><span>Payload: 28,000 lbs</span><span>Orbit: LEO</span><span>Delta-V: Optimized</span>",
                desc: "A feasibility study analyzing the retrofit of the B-52 Stratofortress as an air-launch carrier for small satellites. Calculations demonstrated a significant reduction in Delta-V requirements compared to traditional ground launches."
            },
            glider: {
                title: "Styrofoam RC Glider",
                specs: "<span>Span: 1.3m</span><span>Mat: XPS Foam</span><span>Spar: Aluminum</span><span>Control: 4-CH</span>",
                desc: "End-to-end fabrication of a remote-controlled glider. Utilized XFLR5 for airfoil selection and stability analysis. Construction involved hot-wire foam cutting and reinforcement with hollow aluminum spars."
            },
            f15: {
                title: "F-15 CFD Analysis",
                specs: "<span>Mach: 2.5</span><span>Solver: ANSYS</span><span>Model: K-Epsilon</span><span>Mesh: Polyhedral</span>",
                desc: "Computational Fluid Dynamics simulation of supersonic flow over an F-15 Eagle. The study focused on visualizing shock diamonds at the nozzle exit and calculating drag coefficients under high-speed conditions."
            }
        };

        window.openModal = (id) => {
            const modal = document.getElementById('detail-modal');
            const data = projectData[id];
            
            document.getElementById('m-title').innerText = data.title;
            document.getElementById('m-specs').innerHTML = data.specs;
            document.getElementById('m-desc').innerText = data.desc;
            
            modal.classList.add('open');
        }

        window.closeModal = () => {
            document.getElementById('detail-modal').classList.remove('open');
        }
    </script>
</body>
</html>
